<h1 class='mt-4'>Week of <%= practice_date(@current_week, false) %></h1>

<div class="row mx-1">
  <% (0..6).each do |i| %>
    <% date = @current_week + i.days %>
    <% practices = current_user.practices.on_date(date) %>
    <div class="col border border-light text-center text-white <%= day_background(date, practices) %> <%= i == 0 ? 'rounded-start' : '' %> <%= i == 6 ? 'rounded-end' : '' %>">
      <div class="p-3 d-flex justify-content-center align-items-center flex-column">
        <div class="mb-2">
          <strong><%= date.strftime("%A") %></strong>
        </div>
        <% if practices.length > 0 %>
          <i class="bi bi-music-note fs-2 text-white"></i>
          <%= minutes_in_words(practices.sum(:minutes)) %>
        <% elsif date < Date.current %>
          <i class="bi bi-person-fill-slash fs-2 text-white"></i>
        <% elsif date == Date.current %>
          <i class="bi bi-clock fs-2 text-white"></i>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<div class='d-flex justify-content-between mt-3'>
  <%= link_to "<i class='bi bi-chevron-left'></i> Previous week".html_safe, practices_path(week: @current_week - 1.week),
              class: 'btn btn-outline-primary' %>
  <%= link_to "<i class='bi bi-music-note'></i> New practice".html_safe, new_practice_path,
              data: { turbo_frame: "new_practice" }, class: 'btn btn-primary' %>
  <%= link_to "Next week <i class='bi bi-chevron-right'></i>".html_safe, practices_path(week: @current_week + 1.week),
              class: 'btn btn-outline-primary' %>
</div>

<%= turbo_frame_tag "new_practice", target: "_top" %>

<div class="row row-cols-1 row-cols-md-2 g-4">
  <%= render @practices %>
</div>
